# üîç ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Å‡∏≤‡∏£ Setup ‡πÅ‡∏•‡∏∞‡∏™‡∏¥‡πà‡∏á‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö

## ‚úÖ ‡∏™‡∏¥‡πà‡∏á‡∏ó‡∏µ‡πà‡∏ó‡∏≥‡πÅ‡∏•‡πâ‡∏ß

### 1. Environment Variables ‡πÉ‡∏ô Vercel ‚úÖ
- ‚úÖ `VITE_SUPABASE_URL` - ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÅ‡∏•‡πâ‡∏ß‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ß‡∏≤‡∏ô (14h ago)
- ‚úÖ `VITE_SUPABASE_PUBLISHABLE_KEY` - ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÅ‡∏•‡πâ‡∏ß‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ß‡∏≤‡∏ô (14h ago)

---

## ‚ö†Ô∏è ‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏ó‡∏µ‡πà‡∏û‡∏ö

**Error Message:** "‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÑ‡∏°‡πà‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô - ‡πÑ‡∏°‡πà‡∏û‡∏ö Supabase configuration"

**‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡πá‡∏ô‡πÑ‡∏õ‡πÑ‡∏î‡πâ:**
1. ‚ùå Environment Variables ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ß‡∏≤‡∏ô ‡πÅ‡∏ï‡πà deployment ‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î build **‡∏Å‡πà‡∏≠‡∏ô** ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤
2. ‚ùå ‡∏ï‡πâ‡∏≠‡∏á **Redeploy** ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ Frontend ‡πÉ‡∏ä‡πâ Environment Variables ‡πÉ‡∏´‡∏°‡πà

---

## üîß ‡∏ß‡∏¥‡∏ò‡∏µ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏õ‡∏±‡∏ç‡∏´‡∏≤ Error Message

### ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 1: Redeploy ‡πÉ‡∏ô Vercel (‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç!)

**‡∏ó‡∏≥‡πÑ‡∏°‡∏ï‡πâ‡∏≠‡∏á Redeploy:**
- Environment Variables ‡∏ó‡∏µ‡πà‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÉ‡∏ô Vercel ‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡πÉ‡∏ä‡πâ‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡πÄ‡∏°‡∏∑‡πà‡∏≠ **build ‡πÉ‡∏´‡∏°‡πà**
- Deployment ‡πÄ‡∏Å‡πà‡∏≤‡∏ó‡∏µ‡πà build ‡∏Å‡πà‡∏≠‡∏ô‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ Environment Variables ‡∏à‡∏∞‡∏¢‡∏±‡∏á‡πÉ‡∏ä‡πâ‡∏Ñ‡πà‡∏≤‡πÄ‡∏Å‡πà‡∏≤

**‡∏ß‡∏¥‡∏ò‡∏µ‡∏ó‡∏≥:**
1. ‡πÑ‡∏õ‡∏ó‡∏µ‡πà Vercel Dashboard: https://vercel.com/dashboard
2. ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å Project ‡∏ó‡∏µ‡πà deploy funaging.club
3. ‡πÑ‡∏õ‡∏ó‡∏µ‡πà **Deployments** tab
4. ‡∏Ñ‡∏•‡∏¥‡∏Å **"..."** (‡πÄ‡∏°‡∏ô‡∏π) ‡∏ö‡∏ô deployment ‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î
5. ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å **"Redeploy"**
6. ‡∏£‡∏≠ build ‡πÄ‡∏™‡∏£‡πá‡∏à (1-2 ‡∏ô‡∏≤‡∏ó‡∏µ)
7. Hard Refresh ‡∏´‡∏ô‡πâ‡∏≤ funaging.club (`Ctrl + Shift + R`)

---

## üìã Checklist: ‡∏™‡∏¥‡πà‡∏á‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö

### ‚úÖ 1. Environment Variables
- [x] ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ `VITE_SUPABASE_URL` ‡πÉ‡∏ô Vercel ‡πÅ‡∏•‡πâ‡∏ß
- [x] ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ `VITE_SUPABASE_PUBLISHABLE_KEY` ‡πÉ‡∏ô Vercel ‡πÅ‡∏•‡πâ‡∏ß
- [ ] **Redeploy ‡πÉ‡∏ô Vercel** ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏ä‡πâ Environment Variables ‡πÉ‡∏´‡∏°‡πà
- [ ] ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤ error message ‡∏´‡∏≤‡∏¢‡πÑ‡∏õ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà

---

### ‚ùì 2. Deploy Backend (FastAPI)

**‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô:**
- ‚ùì **‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏ó‡∏£‡∏≤‡∏ö‡∏ß‡πà‡∏≤ backend deploy ‡∏ó‡∏µ‡πà‡πÑ‡∏´‡∏ô**
- Backend code ‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô folder `backend/`
- Frontend ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å API ‡πÑ‡∏õ‡∏ó‡∏µ‡πà `/api` (‡πÉ‡∏ô production)

**‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö:**
1. Backend deploy ‡∏ó‡∏µ‡πà‡πÑ‡∏´‡∏ô? (Render.com, Railway, ‡∏´‡∏£‡∏∑‡∏≠ hosting ‡∏≠‡∏∑‡πà‡∏ô?)
2. Backend URL ‡∏Ñ‡∏∑‡∏≠‡∏≠‡∏∞‡πÑ‡∏£?
3. Backend ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏≠‡∏¢‡∏π‡πà‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà? (test ‡∏ó‡∏µ‡πà `/health` endpoint)

**‡∏ñ‡πâ‡∏≤‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ deploy:**

**‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥: Deploy ‡∏ó‡∏µ‡πà Render.com (‡∏ü‡∏£‡∏µ)**

**‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô:**
1. ‡πÑ‡∏õ‡∏ó‡∏µ‡πà: https://render.com
2. ‡∏™‡∏£‡πâ‡∏≤‡∏á account (‡∏ü‡∏£‡∏µ)
3. New ‚Üí Web Service
4. Connect GitHub repository
5. ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤:
   - **Name:** `sanook-backend` (‡∏´‡∏£‡∏∑‡∏≠‡∏ä‡∏∑‡πà‡∏≠‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£)
   - **Runtime:** Python 3
   - **Build Command:** `cd backend && pip install -r requirements.txt`
   - **Start Command:** `cd backend && uvicorn app.main:app --host 0.0.0.0 --port $PORT`
   - **Environment Variables:**
     - `DATABASE_URL` (‡∏à‡∏≤‡∏Å Supabase)
     - `REDIS_URL` (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ)
6. Deploy

**‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å deploy:**
- ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ `VITE_API_BASE_URL` ‡πÉ‡∏ô Vercel = URL ‡∏Ç‡∏≠‡∏á backend
- ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á: `https://sanook-backend.onrender.com`

---

### ‚ùì 3. ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏° Frontend ‡∏Å‡∏±‡∏ö Backend API

**‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô:**
- Frontend code ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å API ‡∏ú‡πà‡∏≤‡∏ô `getApiUrl()` function
- ‡πÉ‡∏ô development: ‡πÉ‡∏ä‡πâ `http://localhost:8000`
- ‡πÉ‡∏ô production: ‡πÉ‡∏ä‡πâ `/api` ‡∏´‡∏£‡∏∑‡∏≠ `VITE_API_BASE_URL`

**‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö:**

#### A. API Configuration
**‡πÑ‡∏ü‡∏•‡πå:** `src/lib/api.ts`
```typescript
const API_BASE_URL = import.meta.env.VITE_API_BASE_URL || 
  (import.meta.env.DEV ? "http://localhost:8000" : "/api");
```

**‡πÉ‡∏ô Production:**
- ‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏°‡∏µ `VITE_API_BASE_URL` ‚Üí ‡∏à‡∏∞‡πÉ‡∏ä‡πâ `/api`
- `/api` ‡∏´‡∏°‡∏≤‡∏¢‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ß‡πà‡∏≤‡πÄ‡∏£‡∏µ‡∏¢‡∏Å API ‡∏à‡∏≤‡∏Å domain ‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô (funaging.club/api)
- ‡πÅ‡∏ï‡πà‡∏ñ‡πâ‡∏≤ backend deploy ‡πÅ‡∏¢‡∏Å ‚Üí ‡∏ï‡πâ‡∏≠‡∏á‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ `VITE_API_BASE_URL`

#### B. Backend Deployment Status
- ‚ùì Backend deploy ‡∏ó‡∏µ‡πà‡πÑ‡∏´‡∏ô?
- ‚ùì Backend URL ‡∏Ñ‡∏∑‡∏≠‡∏≠‡∏∞‡πÑ‡∏£?
- ‚ùì Backend ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏≠‡∏¢‡∏π‡πà‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?

#### C. CORS Settings
**Backend ‡∏ï‡πâ‡∏≠‡∏á‡∏≠‡∏ô‡∏∏‡∏ç‡∏≤‡∏ï CORS ‡∏à‡∏≤‡∏Å:** `https://funaging.club`

**‡πÑ‡∏ü‡∏•‡πå:** `backend/app/main.py`
```python
app.add_middleware(
    CORSMiddleware,
    allow_origins=["*"],  # ‡∏≠‡∏ô‡∏∏‡∏ç‡∏≤‡∏ï‡∏ó‡∏∏‡∏Å origin (development)
    # ‡πÉ‡∏ô production ‡∏Ñ‡∏ß‡∏£‡∏£‡∏∞‡∏ö‡∏∏: allow_origins=["https://funaging.club"]
)
```

---

### ‚ùì 4. Test ‡∏Å‡∏≤‡∏£ Login/Authentication

**‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô:**
- Authentication ‡πÉ‡∏ä‡πâ Supabase Auth
- Login pages ‡∏°‡∏µ‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß:
  - `/sign-in` - Member login
  - `/admin/sign-in` - Admin login
  - `/staff/sign-in` - Staff login

**‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö:**

#### A. Supabase Configuration
- ‚úÖ Environment Variables ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÅ‡∏•‡πâ‡∏ß
- ‚ùì ‡∏ï‡πâ‡∏≠‡∏á Redeploy ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏ä‡πâ‡∏Ñ‡πà‡∏≤‡πÉ‡∏´‡∏°‡πà

#### B. Database Tables
‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤ Supabase Database ‡∏°‡∏µ:
- ‚úÖ Table `profiles`
- ‚úÖ Table `user_roles`
- ‚úÖ RLS Policies

#### C. Test Login
1. ‡πÑ‡∏õ‡∏ó‡∏µ‡πà: https://funaging.club/sign-in
2. ‡∏û‡∏¢‡∏≤‡∏¢‡∏≤‡∏° login ‡∏î‡πâ‡∏ß‡∏¢ email/password ‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏≠‡∏¢‡∏π‡πà
3. ‡∏î‡∏π‡∏ß‡πà‡∏≤ error ‡∏≠‡∏∞‡πÑ‡∏£ (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ)

---

## üéØ Action Plan

### Step 1: ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç Supabase Error (‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î) üî•

1. **Redeploy ‡πÉ‡∏ô Vercel:**
   - ‡πÑ‡∏õ‡∏ó‡∏µ‡πà Vercel Dashboard
   - Deployments ‚Üí ... ‚Üí Redeploy
   - ‡∏£‡∏≠ build ‡πÄ‡∏™‡∏£‡πá‡∏à (1-2 ‡∏ô‡∏≤‡∏ó‡∏µ)
   - Hard Refresh funaging.club

2. **‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ú‡∏•:**
   - Error message ‡∏Ñ‡∏ß‡∏£‡∏´‡∏≤‡∏¢‡πÑ‡∏õ
   - ‡∏ñ‡πâ‡∏≤‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏´‡∏≤‡∏¢ ‚Üí ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö Browser Console

---

### Step 2: ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö Backend Deployment

**‡∏ñ‡∏≤‡∏°‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°:**
1. Backend deploy ‡∏ó‡∏µ‡πà‡πÑ‡∏´‡∏ô? (‡∏ñ‡πâ‡∏≤‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ deploy ‡∏ï‡πâ‡∏≠‡∏á deploy ‡∏Å‡πà‡∏≠‡∏ô)
2. Backend URL ‡∏Ñ‡∏∑‡∏≠‡∏≠‡∏∞‡πÑ‡∏£?
3. Backend ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏≠‡∏¢‡∏π‡πà‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?

**‡∏ñ‡πâ‡∏≤‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ deploy:**
- Deploy ‡∏ó‡∏µ‡πà Render.com (‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥)
- ‡∏´‡∏£‡∏∑‡∏≠‡∏ö‡∏≠‡∏Å‡∏ß‡πà‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£ deploy ‡∏ó‡∏µ‡πà‡πÑ‡∏´‡∏ô

---

### Step 3: ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏° Frontend-Backend

**‡∏ñ‡πâ‡∏≤ Backend deploy ‡πÅ‡∏•‡πâ‡∏ß:**
1. ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ `VITE_API_BASE_URL` ‡πÉ‡∏ô Vercel
2. Redeploy Frontend
3. Test API calls

---

### Step 4: Test Authentication

**‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å Redeploy:**
1. ‡πÑ‡∏õ‡∏ó‡∏µ‡πà https://funaging.club/sign-in
2. Test login
3. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤ error ‡∏´‡∏≤‡∏¢‡πÑ‡∏õ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà

---

## üìù ‡∏™‡∏£‡∏∏‡∏õ Checklist

### Environment Variables:
- [x] ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ `VITE_SUPABASE_URL` ‡πÉ‡∏ô Vercel ‚úÖ
- [x] ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ `VITE_SUPABASE_PUBLISHABLE_KEY` ‡πÉ‡∏ô Vercel ‚úÖ
- [ ] **Redeploy ‡πÉ‡∏ô Vercel** (‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç!) ‚ö†Ô∏è
- [ ] ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤ error message ‡∏´‡∏≤‡∏¢‡πÑ‡∏õ

### Backend:
- [ ] Backend deploy ‡∏ó‡∏µ‡πà‡πÑ‡∏´‡∏ô? (‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏ó‡∏£‡∏≤‡∏ö)
- [ ] Backend URL ‡∏Ñ‡∏∑‡∏≠‡∏≠‡∏∞‡πÑ‡∏£?
- [ ] Backend ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏≠‡∏¢‡∏π‡πà‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?

### Frontend-Backend Connection:
- [ ] ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ `VITE_API_BASE_URL` ‡πÉ‡∏ô Vercel (‡∏ñ‡πâ‡∏≤ backend deploy ‡πÅ‡∏¢‡∏Å)
- [ ] Test API calls ‡∏à‡∏≤‡∏Å Frontend

### Authentication:
- [ ] Test login ‡∏´‡∏•‡∏±‡∏á Redeploy
- [ ] ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤ Supabase auth ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô

---

## üí° ‡∏™‡∏¥‡πà‡∏á‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏ó‡∏≥‡∏ó‡∏±‡∏ô‡∏ó‡∏µ

1. **Redeploy ‡πÉ‡∏ô Vercel** ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏ä‡πâ Environment Variables ‡πÉ‡∏´‡∏°‡πà
2. **‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö Backend Deployment** - deploy ‡∏ó‡∏µ‡πà‡πÑ‡∏´‡∏ô? ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏≠‡∏¢‡∏π‡πà‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?
3. **Test ‡∏ó‡∏∏‡∏Å‡∏≠‡∏¢‡πà‡∏≤‡∏á** ‡∏´‡∏•‡∏±‡∏á Redeploy

